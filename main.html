<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>كراسات شروط حجز الوحدات السكنية (الطرح الثاني)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .tab-button {
            padding: 10px 20px;
            background-color: #ddd;
            border: none;
            cursor: pointer;
            margin: 0 5px;
            border-radius: 8px 8px 0 0;
        }
        .tab-button.active {
            background-color: #3498db;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        #searchInput {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .filters select, .filters input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            flex: 1;
            min-width: 150px;
        }
        button {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .sort-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        th:hover {
            background-color: #2980b9;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
        .conditions {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 40px;
        }
        .conditions h2 {
            color: #e74c3c;
            cursor: pointer;
        }
        .conditions ul {
            list-style-type: disc;
            padding-right: 20px;
            display: none; /* Hidden by default */
        }
        .conditions ul.show {
            display: block;
        }
        .note {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #856404;
        }
        @media (max-width: 768px) {
            table, th, td {
                font-size: 14px;
            }
            .filters, .sort-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <h1>كراسات شروط حجز الوحدات السكنية (الطرح الثاني)</h1>
    
    <div class="note">
        <p><strong>ملاحظة هامة:</strong> هذه الأسعار هي قيمة تقديرية أولية ولا تشمل نسب التميز، أو وديعة الصيانة، أو المصاريف الإدارية (1%) ومصاريف مجلس الأمناء (0.5%)، وهي أسعار مُعلنة لجدية الحجز وهي قابلة للزيادة بحد أقصى 20%.</p>
    </div>
    
    <div class="tabs">
        <button class="tab-button active" data-tab="all">كل المشاريع</button>
        <button class="tab-button" data-tab="zilal">مشروع ظلال</button>
        <button class="tab-button" data-tab="dyarana">مشروع ديارنا</button>
        <button class="tab-button" data-tab="others">مشاريع أخرى</button>
        <button class="tab-button" data-tab="conditions">الشروط</button>
    </div>
    
    <div id="tableContainer">
        <p>ابحث عن المشروع، المدينة، أو الحي:</p>
        <input type="text" id="searchInput" placeholder="اكتب هنا للبحث...">
        
        <div class="filters">
            <select id="projectFilter">
                <option value="">كل المشاريع</option>
                <!-- Options will be populated dynamically -->
            </select>
            <select id="cityFilter">
                <option value="">كل المدن</option>
                <!-- Options will be populated dynamically -->
            </select>
            <input type="number" id="minPrice" placeholder="سعر متر أدنى (جنيه)">
            <input type="number" id="maxPrice" placeholder="سعر متر أعلى (جنيه)">
            <input type="number" id="minUnitPrice" placeholder="سعر وحدة أدنى (جنيه)">
            <input type="number" id="maxUnitPrice" placeholder="سعر وحدة أعلى (جنيه)">
            <button id="applyPriceFilter">تطبيق فلتر السعر</button>
            <button id="resetFilters">إعادة تعيين</button>
        </div>
        
        <div class="sort-section">
            <select id="sortColumn">
                <option value="">اختر عمود الترتيب</option>
                <option value="project">المشروع</option>
                <option value="city">المدينة</option>
                <option value="district">الحي</option>
                <option value="price">سعر المتر</option>
                <option value="deposit">جدية الحجز</option>
                <option value="area_range">نطاق المساحات</option>
                <option value="unit_price">سعر الوحدة</option>
            </select>
            <select id="sortDirection">
                <option value="asc">تصاعدي</option>
                <option value="desc">تنازلي</option>
            </select>
            <button id="applySort">ترتيب</button>
        </div>
        
        <table id="housingTable">
            <thead>
                <tr>
                    <th data-sort="project">المشروع</th>
                    <th data-sort="city">المدينة</th>
                    <th data-sort="district">الحي</th>
                    <th data-sort="price">سعر المتر المربع (جنيه)</th>
                    <th data-sort="deposit">جدية الحجز (جنيه)</th>
                    <th data-sort="area_range">نطاق المساحات (م² تقريبي)</th>
                    <th data-sort="unit_price">نطاق سعر الوحدة التقديري (جنيه)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>مدينة الشيخ زايد</td>
                    <td>-</td>
                    <td>34900</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,978,600 إلى 7,922,300</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>القاهرة الجديدة</td>
                    <td>-</td>
                    <td>33250</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,790,500 إلى 7,549,750</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>مدينة 6 أكتوبر</td>
                    <td>-</td>
                    <td>32600</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,716,400 إلى 7,404,200</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>مدينة الشروق</td>
                    <td>-</td>
                    <td>30950</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,528,300 إلى 7,025,650</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>مدينة العبور</td>
                    <td>-</td>
                    <td>30100</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,431,400 إلى 6,832,700</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>العلمين الجديدة</td>
                    <td>-</td>
                    <td>29000</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,306,000 إلى 6,583,000</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>مدينة حدائق العاصمة</td>
                    <td>-</td>
                    <td>27600</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,146,400 إلى 6,265,200</td>
                </tr>
                <tr>
                    <td>مشروع ظلال (فاخر)</td>
                    <td>العاشر من رمضان</td>
                    <td>-</td>
                    <td>26900</td>
                    <td>250000</td>
                    <td>114 - 227</td>
                    <td>من 3,066,600 إلى 6,098,300</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة حدائق أكتوبر</td>
                    <td>-</td>
                    <td>22000</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 2,288,000 إلى 3,388,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة دمياط الجديدة</td>
                    <td>-</td>
                    <td>21500</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 2,236,000 إلى 3,311,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>العلمين الجديدة</td>
                    <td>-</td>
                    <td>19000</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,976,000 إلى 2,926,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة العبور الجديدة</td>
                    <td>-</td>
                    <td>18700</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,944,800 إلى 2,879,800</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة أكتوبر الجديدة</td>
                    <td>-</td>
                    <td>18500</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,924,000 إلى 2,849,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة 15 مايو</td>
                    <td>-</td>
                    <td>18400</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,913,600 إلى 2,833,600</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة بدر</td>
                    <td>-</td>
                    <td>18300</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,903,200 إلى 2,818,200</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة برج العرب الجديدة</td>
                    <td>-</td>
                    <td>17700</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,840,800 إلى 2,725,800</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة السويس الجديدة</td>
                    <td>-</td>
                    <td>17500</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,820,000 إلى 2,695,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة السادات الجديدة</td>
                    <td>-</td>
                    <td>17500</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,820,000 إلى 2,695,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة بنى سويف الجديدة</td>
                    <td>-</td>
                    <td>17000</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,768,000 إلى 2,618,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة المنيا الجديدة</td>
                    <td>-</td>
                    <td>16900</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,757,600 إلى 2,602,600</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة سوهاج الجديدة</td>
                    <td>-</td>
                    <td>16500</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,716,000 إلى 2,541,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة ناصر الجديدة غرب أسيوط</td>
                    <td>-</td>
                    <td>16000</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,664,000 إلى 2,464,000</td>
                </tr>
                <tr>
                    <td>مشروع ديارنا (متوسط)</td>
                    <td>مدينة قنا الجديدة</td>
                    <td>-</td>
                    <td>15900</td>
                    <td>200000</td>
                    <td>104 - 154</td>
                    <td>من 1,653,600 إلى 2,448,600</td>
                </tr>
                <tr>
                    <td>جنة</td>
                    <td>المنصورة الجديدة</td>
                    <td>-</td>
                    <td>17500</td>
                    <td>150000</td>
                    <td>100 - 150</td>
                    <td>من 1,750,000 إلى 2,625,000</td>
                </tr>
                <tr>
                    <td>سكن مصر</td>
                    <td>المنصورة الجديدة</td>
                    <td>-</td>
                    <td>15900</td>
                    <td>150000</td>
                    <td>115 - 130</td>
                    <td>من 1,828,500 إلى 2,067,000</td>
                </tr>
                <tr>
                    <td>روضة العبور</td>
                    <td>بجوار مدينة العبور</td>
                    <td>-</td>
                    <td>12200</td>
                    <td>150000</td>
                    <td>101 - 111</td>
                    <td>من 1,232,200 إلى 1,354,200</td>
                </tr>
                <tr>
                    <td>الإسكان الحر</td>
                    <td>السويس الجديدة</td>
                    <td>-</td>
                    <td>12100</td>
                    <td>150000</td>
                    <td>90</td>
                    <td>1,089,000 (مساحة ثابتة تقريباً)</td>
                </tr>
                <tr>
                    <td>سكن مصر</td>
                    <td>غرب قنا الجديدة</td>
                    <td>-</td>
                    <td>11650</td>
                    <td>150000</td>
                    <td>106 - 123</td>
                    <td>من 1,234,900 إلى 1,433,000</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div id="conditions" class="tab-content">
        <div class="conditions">
            <h2 onclick="toggleConditions()">الشروط العامة المشتركة (اضغط للعرض/الإخفاء)</h2>
            <ul id="conditionsList">
                <li>أن يكون المتقدم مصري الجنسية وطبيعيًا وليس اعتباريًا.</li>
                <li>ألا يقل عمر المتقدم عن 21 عامًا وقت التقديم, وأن يكون له الأهلية القانونية للتصرف والتعاقد.</li>
                <li>يخضع الحجز لأحكام القانون رقم 59 لسنة 1979 بشأن إنشاء المجتمعات العمرانية الجديدة, وأحكام قانون التمويل العقاري وقرارات البنك المركزي المصري ذات الصلة.</li>
                <li>لا يحق للأسرة (الزوج والزوجة والأولاد القصر) التقدم لحجز أكثر من وحدة في نفس المشروع.</li>
                <li>يُسمح للأعزب بحجز وحدة واحدة فقط في نفس الطرح.</li>
                <li>يعتبر الإعلان وكراسة الشروط جزءًا لا يتجزأ من عقد البيع.</li>
                <li>يُعد سداد جدية الحجز موافقة نهائية على الشروط والمواصفات.</li>
                <li>الوحدات مخصصة للسكن فقط, ولا يجوز تغيير الغرض من استخدامها.</li>
                <li>في حال المخالفة يتم سحب الوحدة واتخاذ الإجراءات القانونية.</li>
            </ul>
        </div>
        <div class="note">
            <p><strong>ملحوظة خاصة بوحدات الروف (البنتهاوس):</strong> في جميع المشاريع، إذا كان التقديم لحجز وحدات البنتهاوس, فإن سعر المتر المربع لمساحة الروف الخاصة بها يكون 50% من سعر المتر للوحدة السكنية، بخلاف التميز.</p>
        </div>
    </div>

    <script>
        let tabProjectFilter = '';
        const tabButtons = document.querySelectorAll('.tab-button');
        const conditionsContent = document.getElementById('conditions');
        const tableContainer = document.getElementById('tableContainer');
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                const tab = button.dataset.tab;
                if (tab === 'conditions') {
                    tableContainer.style.display = 'none';
                    conditionsContent.style.display = 'block';
                } else {
                    tableContainer.style.display = 'block';
                    conditionsContent.style.display = 'none';
                    if (tab === 'all') {
                        tabProjectFilter = '';
                    } else if (tab === 'zilal') {
                        tabProjectFilter = 'ظلال';
                    } else if (tab === 'dyarana') {
                        tabProjectFilter = 'ديارنا';
                    } else if (tab === 'others') {
                        tabProjectFilter = 'others';
                    }
                    applyFilters();
                }
            });
        });

        const searchInput = document.getElementById('searchInput');
        const table = document.getElementById('housingTable');
        const rows = Array.from(table.querySelectorAll('tbody tr'));
        const projectFilter = document.getElementById('projectFilter');
        const cityFilter = document.getElementById('cityFilter');
        const minPrice = document.getElementById('minPrice');
        const maxPrice = document.getElementById('maxPrice');
        const minUnitPrice = document.getElementById('minUnitPrice');
        const maxUnitPrice = document.getElementById('maxUnitPrice');
        const applyPriceFilter = document.getElementById('applyPriceFilter');
        const resetButton = document.getElementById('resetFilters');
        const headers = table.querySelectorAll('th[data-sort]');
        const sortColumn = document.getElementById('sortColumn');
        const sortDirection = document.getElementById('sortDirection');
        const applySort = document.getElementById('applySort');

        // Populate filters dynamically
        const projects = new Set();
        const cities = new Set();
        rows.forEach(row => {
            projects.add(row.cells[0].textContent.trim());
            cities.add(row.cells[1].textContent.trim());
        });

        Array.from(projects).sort().forEach(project => {
            const option = document.createElement('option');
            option.value = project;
            option.textContent = project;
            projectFilter.appendChild(option);
        });

        Array.from(cities).sort().forEach(city => {
            const option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            cityFilter.appendChild(option);
        });

        // Filter function
        function applyFilters() {
            const searchText = searchInput.value.toLowerCase();
            const selectedProject = projectFilter.value.toLowerCase();
            const selectedCity = cityFilter.value.toLowerCase();
            const minP = parseFloat(minPrice.value) || 0;
            const maxP = parseFloat(maxPrice.value) || Infinity;
            const minUP = parseFloat(minUnitPrice.value) || 0;
            const maxUP = parseFloat(maxUnitPrice.value) || Infinity;

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                const project = row.cells[0].textContent.trim().toLowerCase();
                const city = row.cells[1].textContent.toLowerCase();
                const price = parseFloat(row.cells[3].textContent) || 0;
                const unitPriceText = row.cells[6].textContent.trim();
                let minU, maxU;
                if (unitPriceText.includes('من') && unitPriceText.includes('إلى')) {
                    minU = parseFloat(unitPriceText.split('من ')[1].split(' إلى')[0].replace(/,/g, ''));
                    maxU = parseFloat(unitPriceText.split('إلى ')[1].replace(/,/g, ''));
                } else {
                    minU = maxU = parseFloat(unitPriceText.replace(/,/g, '').match(/\d+/)[0]);
                }
                const matchesSearch = text.includes(searchText);
                const matchesProject = !selectedProject || project === selectedProject;
                const matchesCity = !selectedCity || city === selectedCity;
                const matchesPrice = price >= minP && price <= maxP;
                const matchesUnitPrice = minU <= maxUP && maxU >= minUP;
                let matchesTab = true;
                if (tabProjectFilter === 'others') {
                    matchesTab = !project.includes('ظلال') && !project.includes('ديارنا');
                } else if (tabProjectFilter !== '') {
                    matchesTab = project.includes(tabProjectFilter.toLowerCase());
                }
                row.style.display = (matchesSearch && matchesProject && matchesCity && matchesPrice && matchesUnitPrice && matchesTab) ? '' : 'none';
            });
        }

        // Event listeners for filters
        searchInput.addEventListener('keyup', applyFilters);
        projectFilter.addEventListener('change', applyFilters);
        cityFilter.addEventListener('change', applyFilters);
        applyPriceFilter.addEventListener('click', applyFilters);

        // Reset filters
        resetButton.addEventListener('click', () => {
            searchInput.value = '';
            projectFilter.value = '';
            cityFilter.value = '';
            minPrice.value = '';
            maxPrice.value = '';
            minUnitPrice.value = '';
            maxUnitPrice.value = '';
            applyFilters();
        });

        // Sorting function for headers
        headers.forEach(header => {
            header.addEventListener('click', () => {
                const sortKey = header.dataset.sort;
                const isNumeric = ['price', 'deposit', 'unit_price'].includes(sortKey);
                const multiplier = header.classList.contains('asc') ? -1 : 1;

                sortTable(sortKey, multiplier, isNumeric);

                headers.forEach(h => h.classList.remove('asc', 'desc'));
                header.classList.toggle('asc', multiplier === 1);
                header.classList.toggle('desc', multiplier === -1);
            });
        });

        // Sort button
        applySort.addEventListener('click', () => {
            const sortKey = sortColumn.value;
            const dir = sortDirection.value === 'asc' ? 1 : -1;
            const isNumeric = ['price', 'deposit', 'unit_price'].includes(sortKey);

            if (sortKey) {
                sortTable(sortKey, dir, isNumeric);
            }
        });

        function sortTable(sortKey, multiplier, isNumeric) {
            const columnIndex = {
                project: 0,
                city: 1,
                district: 2,
                price: 3,
                deposit: 4,
                area_range: 5,
                unit_price: 6
            }[sortKey];

            rows.sort((a, b) => {
                let valA = a.cells[columnIndex].textContent.trim();
                let valB = b.cells[columnIndex].textContent.trim();

                if (sortKey === 'unit_price') {
                    valA = parseFloat(valA.match(/\d{1,3}(?:,\d{3})*/)[0].replace(/,/g, '')) || 0;
                    valB = parseFloat(valB.match(/\d{1,3}(?:,\d{3})*/)[0].replace(/,/g, '')) || 0;
                    return multiplier * (valA - valB);
                } else if (isNumeric) {
                    valA = parseFloat(valA) || 0;
                    valB = parseFloat(valB) || 0;
                    return multiplier * (valA - valB);
                } else {
                    return multiplier * valA.localeCompare(valB);
                }
            });

            rows.forEach(row => table.tBodies[0].appendChild(row));
            applyFilters(); // Re-apply filters after sorting
        }

        // Toggle conditions
        function toggleConditions() {
            const list = document.getElementById('conditionsList');
            list.classList.toggle('show');
        }

        // Initial setup
        conditionsContent.style.display = 'none';
        applyFilters();
    </script>
</body>
</html>
